(()=>{var e={};e.id=702,e.ids=[702],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7028:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>h,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var r=s(482),n=s(9108),i=s(2563),a=s.n(i),l=s(8300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["dashboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5114)),"C:\\Users\\adoni\\Desktop\\projects\\basednet\\src\\app\\dashboard\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,9342)),"C:\\Users\\adoni\\Desktop\\projects\\basednet\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\adoni\\Desktop\\projects\\basednet\\src\\app\\dashboard\\page.tsx"],p="/dashboard/page",h={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/dashboard/page",pathname:"/dashboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9197:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,6840,23)),Promise.resolve().then(s.t.bind(s,8771,23)),Promise.resolve().then(s.t.bind(s,3225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,3982,23))},5905:(e,t,s)=>{Promise.resolve().then(s.bind(s,2038))},4286:(e,t,s)=>{Promise.resolve().then(s.bind(s,7216))},2038:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>d});var r=s(5344),n=s(3729),i=s(8428),a=s(3083),l=s(5814),o=s(6548);function d(){let e=(0,i.useRouter)(),{isLoading:t,isAuthenticated:s}=(0,l.a)(),[d,c]=(0,n.useState)([]),[p,h]=(0,n.useState)({total:0,pinned:0,totalSize:0}),[u,x]=(0,n.useState)(!0),[m,g]=(0,n.useState)(null),[y,f]=(0,n.useState)(""),[j,b]=(0,n.useState)(""),[v,w]=(0,n.useState)(""),[P,C]=(0,n.useState)(!1);(0,n.useEffect)(()=>{t||s||e.push("/")},[t,s,e]),(0,n.useEffect)(()=>{s&&S()},[s]);let S=async()=>{x(!0),g(null);try{let e=await o.hi.ipfs.getContent();if(e.error)throw Error(e.error);c(e.data?.content||[]),h(e.data?.stats||{total:0,pinned:0,totalSize:0})}catch(e){console.error("Error fetching IPFS content:",e),g(e.message)}finally{x(!1)}},N=async e=>{if(e.preventDefault(),!y){g("CID is required");return}C(!0),g(null);try{let e=await o.hi.ipfs.createContent({cid:y,filename:j||void 0,contentType:v||void 0});if(e.error)throw Error(e.error);f(""),b(""),w(""),S()}catch(e){g(e.message)}finally{C(!1)}},k=async(e,t)=>{try{let s=await o.hi.ipfs.updatePinStatus(e,!t);if(s.error)throw Error(s.error);c(s=>s.map(s=>s.cid===e?{...s,pinned:!t}:s)),h(e=>({...e,pinned:t?Math.max(0,e.pinned-1):e.pinned+1}))}catch(e){g(e.message)}},A=async e=>{if(confirm("Are you sure you want to delete this content?"))try{let t=await o.hi.ipfs.deleteContent(e);if(t.error)throw Error(t.error);S()}catch(e){g(e.message)}},E=e=>{if(void 0===e)return"Unknown";if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]};return t?(0,r.jsxs)("div",{className:"win98-desktop",children:[r.jsx(a.Z,{}),(0,r.jsxs)("div",{className:"window",style:{maxWidth:"600px",margin:"20px auto"},children:[r.jsx("div",{className:"window-title",children:r.jsx("span",{children:"Loading..."})}),r.jsx("div",{className:"window-content",style:{textAlign:"center",padding:"20px"},children:r.jsx("div",{className:"loading-98"})})]})]}):s?(0,r.jsxs)("div",{className:"win98-desktop",children:[r.jsx(a.Z,{}),(0,r.jsxs)("div",{className:"window",style:{maxWidth:"900px",margin:"20px auto"},children:[(0,r.jsxs)("div",{className:"window-title",children:[r.jsx("span",{children:"IPFS Content Dashboard"}),r.jsx("span",{children:"\xd7"})]}),(0,r.jsxs)("div",{className:"window-content",children:[m&&(0,r.jsxs)("div",{style:{backgroundColor:"#ffdddd",border:"1px solid #ff0000",padding:"10px",marginBottom:"15px"},children:["Error: ",m]}),(0,r.jsxs)("div",{style:{display:"flex",marginBottom:"20px"},children:[(0,r.jsxs)("div",{style:{flex:1,padding:"10px",border:"1px solid #c0c0c0"},children:[r.jsx("h3",{style:{margin:"0 0 10px 0"},children:"Content Stats"}),r.jsx("table",{style:{width:"100%"},children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[r.jsx("td",{children:"Total Files:"}),r.jsx("td",{children:p.total})]}),(0,r.jsxs)("tr",{children:[r.jsx("td",{children:"Pinned Files:"}),r.jsx("td",{children:p.pinned})]}),(0,r.jsxs)("tr",{children:[r.jsx("td",{children:"Total Size:"}),r.jsx("td",{children:E(p.totalSize)})]})]})})]}),(0,r.jsxs)("div",{style:{flex:1,padding:"10px",border:"1px solid #c0c0c0",marginLeft:"10px"},children:[r.jsx("h3",{style:{margin:"0 0 10px 0"},children:"Add New Content"}),(0,r.jsxs)("form",{onSubmit:N,children:[(0,r.jsxs)("div",{style:{marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"cid",style:{display:"block",marginBottom:"5px"},children:"CID:"}),r.jsx("input",{id:"cid",type:"text",value:y,onChange:e=>f(e.target.value),className:"input-98",style:{width:"100%"},placeholder:"Qm...",required:!0})]}),(0,r.jsxs)("div",{style:{marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"filename",style:{display:"block",marginBottom:"5px"},children:"Filename (optional):"}),r.jsx("input",{id:"filename",type:"text",value:j,onChange:e=>b(e.target.value),className:"input-98",style:{width:"100%"},placeholder:"example.jpg"})]}),(0,r.jsxs)("div",{style:{marginBottom:"10px"},children:[r.jsx("label",{htmlFor:"contentType",style:{display:"block",marginBottom:"5px"},children:"Content Type (optional):"}),r.jsx("input",{id:"contentType",type:"text",value:v,onChange:e=>w(e.target.value),className:"input-98",style:{width:"100%"},placeholder:"image/jpeg"})]}),r.jsx("button",{type:"submit",className:"btn-98",disabled:P,children:P?"Adding...":"Add Content"})]})]})]}),r.jsx("h3",{children:"Your IPFS Content"}),u?r.jsx("div",{style:{textAlign:"center",padding:"20px"},children:r.jsx("div",{className:"loading-98"})}):0===d.length?r.jsx("p",{children:"You don't have any IPFS content yet. Add some using the form above."}):(0,r.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},children:[r.jsx("thead",{children:(0,r.jsxs)("tr",{style:{backgroundColor:"#c0c0c0"},children:[r.jsx("th",{style:{padding:"8px",textAlign:"left"},children:"Filename"}),r.jsx("th",{style:{padding:"8px",textAlign:"left"},children:"CID"}),r.jsx("th",{style:{padding:"8px",textAlign:"left"},children:"Type"}),r.jsx("th",{style:{padding:"8px",textAlign:"right"},children:"Size"}),r.jsx("th",{style:{padding:"8px",textAlign:"center"},children:"Pinned"}),r.jsx("th",{style:{padding:"8px",textAlign:"center"},children:"Actions"})]})}),r.jsx("tbody",{children:d.map(e=>(0,r.jsxs)("tr",{style:{borderBottom:"1px solid #c0c0c0"},children:[r.jsx("td",{style:{padding:"8px"},children:e.filename||"Unnamed"}),r.jsx("td",{style:{padding:"8px"},children:(0,r.jsxs)("a",{href:`https://ipfs.io/ipfs/${e.cid}`,target:"_blank",rel:"noopener noreferrer",children:[e.cid.substring(0,10),"..."]})}),r.jsx("td",{style:{padding:"8px"},children:e.content_type||"Unknown"}),r.jsx("td",{style:{padding:"8px",textAlign:"right"},children:E(e.size)}),r.jsx("td",{style:{padding:"8px",textAlign:"center"},children:r.jsx("input",{type:"checkbox",checked:e.pinned,onChange:()=>k(e.cid,e.pinned),"aria-label":`Pin ${e.filename||"content"}`})}),r.jsx("td",{style:{padding:"8px",textAlign:"center"},children:r.jsx("button",{className:"btn-98 btn-small",onClick:()=>A(e.cid),"aria-label":`Delete ${e.filename||"content"}`,children:"Delete"})})]},e.id))})]})]})]})]}):null}},3083:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(5344);s(3729);var n=s(6506),i=s(5814);function a(){let{user:e,isAuthenticated:t,isLoading:s,login:a,logout:l}=(0,i.a)();return(0,r.jsxs)("nav",{className:"navbar-98",children:[r.jsx("button",{className:"btn-98",children:"Start"}),r.jsx("div",{style:{marginLeft:"10px"},children:"|"}),r.jsx(n.default,{href:"/",className:"btn-98",children:"Home"}),r.jsx(n.default,{href:"/browse",className:"btn-98",children:"Browse"}),r.jsx(n.default,{href:"/webrings",className:"btn-98",children:"Webrings"}),s?r.jsx("div",{className:"loading-98",style:{marginLeft:"auto"}}):t?(0,r.jsxs)(r.Fragment,{children:[r.jsx(n.default,{href:"/dashboard",className:"btn-98",children:"My Dashboard"}),r.jsx(n.default,{href:"/profile",className:"btn-98",children:"Profile"}),(0,r.jsxs)("button",{className:"btn-98",style:{marginLeft:"auto"},onClick:()=>l(),children:["Logout (",e?.username,")"]})]}):r.jsx("button",{className:"btn-98",style:{marginLeft:"auto"},onClick:()=>a(),children:"Login"}),r.jsx(n.default,{href:"/help",className:"btn-98",children:"Help"})]})}},7216:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(5344);s(3729);var n=s(7674),i=s(5814);function a({children:e}){return r.jsx(n.SessionProvider,{children:r.jsx(i.H,{children:e})})}},5814:(e,t,s)=>{"use strict";s.d(t,{H:()=>o,a:()=>d});var r=s(5344),n=s(3729),i=s(7674),a=s(6548);let l=(0,n.createContext)(void 0);function o({children:e}){let{data:t,status:s}=(0,i.useSession)(),[o,d]=(0,n.useState)(null),[c,p]=(0,n.useState)(null),[h,u]=(0,n.useState)(!0),[x,m]=(0,n.useState)(null),g=async()=>{if(!t?.user){d(null),p(null),u(!1);return}try{u(!0),m(null);let e=await a.hi.user.getCurrentUser();if(e.error)throw Error(e.error);d(e.data?.user||null);let t=await a.hi.profile.getProfile();if(t.error)throw Error(t.error);p(t.data?.profile||null)}catch(e){console.error("Error fetching user data:",e),m(e.message)}finally{u(!1)}};(0,n.useEffect)(()=>{"loading"!==s&&g()},[t,s]);let y=async()=>{try{await (0,i.signIn)("indieauth",{callbackUrl:"/"})}catch(e){console.error("Login error:",e),m(e.message)}},f=async()=>{try{await (0,i.signOut)({callbackUrl:"/"}),d(null),p(null)}catch(e){console.error("Logout error:",e),m(e.message)}},j=async()=>{await g()};return r.jsx(l.Provider,{value:{user:o,profile:c,isLoading:h,isAuthenticated:!!o,error:x,login:y,logout:f,refreshUserData:j},children:e})}function d(){let e=(0,n.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},6548:(e,t,s)=>{"use strict";s.d(t,{hi:()=>i});class r extends Error{constructor(e,t){super(e),this.status=t,this.name="ApiError"}}async function n(e,t={}){try{let s=await fetch(e,{...t,headers:{"Content-Type":"application/json",...t.headers}}),n=await s.json();if(!s.ok)throw new r(n.error||"An error occurred",s.status);return{data:n}}catch(e){return{error:e.message}}}let i={user:{getCurrentUser:async()=>n("/api/users?me=true"),getUserByUsername:async e=>n(`/api/users/${e}`),updateUser:async e=>n("/api/users",{method:"PUT",body:JSON.stringify(e)}),listUsers:async({limit:e=10,offset:t=0}={})=>n(`/api/users?limit=${e}&offset=${t}`)},profile:{getProfile:async()=>n("/api/profile"),updateProfile:async e=>n("/api/profile",{method:"PUT",body:JSON.stringify(e)})},ipfs:{getContent:async({limit:e=10,offset:t=0}={})=>n(`/api/ipfs?limit=${e}&offset=${t}`),getContentByCid:async e=>n(`/api/ipfs/${e}`),createContent:async e=>n("/api/ipfs",{method:"POST",body:JSON.stringify(e)}),updatePinStatus:async(e,t)=>n(`/api/ipfs/${e}`,{method:"PATCH",body:JSON.stringify({pinned:t})}),deleteContent:async e=>n(`/api/ipfs/${e}`,{method:"DELETE"})}}},5114:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>a});let r=(0,s(6843).createProxy)(String.raw`C:\Users\adoni\Desktop\projects\basednet\src\app\dashboard\page.tsx`),{__esModule:n,$$typeof:i}=r,a=r.default},9342:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u,metadata:()=>h});var r=s(5036),n=s(8553),i=s.n(n),a=s(380),l=s.n(a);s(5023),s(4141);let o=(0,s(6843).createProxy)(String.raw`C:\Users\adoni\Desktop\projects\basednet\src\components\Providers.tsx`),{__esModule:d,$$typeof:c}=o,p=o.default,h={title:"Basednet - The Next-Gen Indie Web Platform",description:"Create, customize, and host your personal website with P2P hosting, webrings, and AI-powered discovery on Basednet.",keywords:["indie web","personal website","webring","P2P hosting","IPFS","web3"]};function u({children:e}){return r.jsx("html",{lang:"en",className:`${i().variable} ${l().variable}`,children:r.jsx("body",{className:"win98-desktop",children:r.jsx(p,{children:e})})})}},5023:()=>{},4141:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,656,321],()=>s(7028));module.exports=r})();