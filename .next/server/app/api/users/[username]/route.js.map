{"version":3,"file":"../app/api/users/[username]/route.js","mappings":"sEAAAA,EAAAC,OAAA,CAAAC,QAAA,6BCAAF,EAAAC,OAAA,CAAAC,QAAA,4ECAAF,EAAAC,OAAA,CAAAC,QAAA,uECAAF,EAAAC,OAAA,CAAAC,QAAA,scEOA,SAASC,EAAYC,CAAO,CAAEC,CAAM,QAGlC,2BAAIC,QAAQC,GAAG,CAACC,UAAU,EAItB,mBAAOJ,EAHFA,EAOF,IAAIK,MAAML,EAAS,CACxBM,MAAO,CAACC,EAAkBC,EAASC,KACjC,IAAIC,EACAC,EACAC,EAGJ,GAAI,CAEF,IAAMC,EAAoBC,EAAAC,mBAAmB,CAACC,QAAQ,GACtDN,EAAoB,GAAAO,EAAAC,CAAA,EAAiB,GAAAC,EAAAC,CAAA,EAAe,CAACP,EAAmB,iBAAkBQ,GAAKA,EAAET,OAAO,CAAE,SAAUU,GAAMA,EAAGC,GAAG,CAAE,OAAQC,GAAMA,EAAG,gBAAgB,EAAG,IAAQC,KAAAA,GAC9Kd,EAAgB,GAAAM,EAAAC,CAAA,EAAiB,GAAAC,EAAAC,CAAA,EAAe,CAACP,EAAmB,iBAAkBa,GAAMA,EAAGd,OAAO,CAAE,SAAUe,GAAMA,EAAGJ,GAAG,CAAE,OAAQK,GAAMA,EAAG,WAAW,EAAG,IAAQH,KAAAA,GACvKb,EAAU,GAAAO,EAAAC,CAAA,EAAe,CAACP,EAAmB,iBAAkBgB,GAAMA,EAAGjB,OAAO,CAAC,CACxF,CAAQ,MAAOkB,EAAG,CAElB,CAGM,OAAOC,EAAAC,0BAAiC,CAACzB,EAAmB,CAC1DN,OAAAA,EACAgC,mBAAoB,wBACpBvB,kBAAAA,EACAC,cAAAA,EACAC,QAAAA,CACR,GAASN,KAAK,CAACE,EAASC,EACxB,CACA,EACA,CAGK,IAACyB,EAAMnC,ED5CL,eACLoC,CAAgB,CAChB,CAAEC,OAAAA,CAAM,CAAoC,EAE5C,GAAI,CACF,GAAM,CAAEC,SAAAA,CAAQ,CAAE,CAAGD,EACfE,EAAO,MAAMC,EAAAA,CAAUC,CAAAA,cAAc,CAACH,GAE5C,GAAI,CAACC,EACH,OAAOG,EAAAA,CAAAA,CAAaC,IAAI,CACtB,CAAEC,MAAO,kBACT,CAAEC,OAAQ,GAAI,GAKlB,IAAMC,EAAU,MAAMC,EAAAA,CAAAA,CAAaC,YAAY,CAACT,EAAKU,EAAE,EAGjD,CAAEC,YAAAA,CAAW,CAAEC,MAAAA,CAAK,CAAE,GAAGC,EAAU,CAAGb,EAE5C,OAAOG,EAAAA,CAAAA,CAAaC,IAAI,CAAC,CACvBJ,KAAMa,EACNN,QAAAA,CACF,EACF,CAAE,MAAOF,EAAO,CAEd,OADAS,QAAQT,KAAK,CAAC,uBAAwBA,GAC/BF,EAAAA,CAAAA,CAAaC,IAAI,CACtB,CAAEC,MAAO,wBACT,CAAEC,OAAQ,GAAI,EAElB,CACF,ECYoD,OAE9CS,EAAOtD,EAAYuD,KAAAA,EAA6B,QAEhDC,EAAMxD,EAAYyD,KAAAA,EAA4B,OAE9CC,EAAQ1D,EAAY2D,KAAAA,EAA8B,SAElDC,EAAS5D,EAAY6D,KAAAA,EAA+B,UAEpDC,EAAO9D,EAAY+D,KAAAA,EAA6B,QAEhDC,EAAUhE,EAAYiE,KAAAA,EAAgC,WCrD5DC,EAAA,IAAwBC,EAAAC,mBAAmB,EAC3CC,WAAA,CACAC,KAAcC,EAAAlD,CAAS,CAAAmD,SAAA,CACvBC,KAAA,8BACAC,SAAA,wBACAC,SAAA,QACAC,WAAA,gCACA,EACAC,iBAAA,4FACAC,iBAVA,GAWAC,SAAYC,CACZ,GAIA,CAAQhE,oBAAAA,CAAA,CAAAiE,6BAAAA,CAAA,CAAAC,YAAAA,CAAA,CAAAC,YAAAA,CAAA,CAAAC,wBAAAA,CAAA,EAAuGlB,EAC/GmB,EAAA,8BACA,SAAAC,IACA,MAAW,GAAAC,EAAAD,UAAA,EAAW,CACtBJ,YAAAA,EACAD,6BAAAA,CACA,EACA,kCC7BIO,EAA2E,oBAAOC,OAAwBA,OAAS,oBAAOC,KAAsBA,KAAO,CAAC,CAC5JF,CAAAA,EAAiC,4BAA+B,CAAG9D,KAAAA,EACnE8D,EAAiC,cAAiB,CAAG,CAAC,GAAK,uBAAuB,EAClFA,EAAiC,gBAAmB,CAAG9D,KAAAA,EACvD8D,EAAiC,wBAA2B,CAAG,QAI/DG,EAAAA,IAAW,CAAC,CACVC,IAAKzF,QAAQC,GAAG,CAACyF,UAAU,CAG3BC,iBAAkB,GAGlBC,aAAc,CACZ,IAAIJ,EAAAA,cAAqB,CAAC,CAExBK,wBAAyB,CAAC,YAAa,kCAAkC,GAE5E,CAGDC,YAvBF,aA0BEC,WAAWC,CAAK,EAOd,GAAIA,EAAMC,SAAS,CAAE,CACnB,IAAMC,EAAiBF,EAAMC,SAAS,CAACE,MAAM,EAAE,CAAC,EAAE,EAAEC,MACpD,GAAIF,GAAgBG,SAAS,uBAC3B,OAAO,IAEX,CAEA,OAAOL,CACT,EAGAM,MAAOtG,CAAAA,EACPuG,eAAgB,GAChBC,iBAAkB,EACpB,cC9CA,IAAIC,EAAYC,OAAOC,cAAc,CACjCC,EAAmBF,OAAOG,wBAAwB,CAClDC,EAAoBJ,OAAOK,mBAAmB,CAC9CC,EAAeN,OAAOO,SAAS,CAACC,cAAc,CAgB9CC,EAAc,CAAC,EAWnB,SAASC,EAAgBC,CAAC,EACxB,IAAIC,EACJ,IAAMC,EAAQ,CACZ,SAAUF,GAAKA,EAAEG,IAAI,EAAI,CAAC,KAAK,EAAEH,EAAEG,IAAI,CAAC,CAAC,CACzC,YAAaH,GAAMA,CAAAA,EAAEI,OAAO,EAAIJ,IAAAA,EAAEI,OAAO,GAAW,CAAC,QAAQ,EAAE,CAAC,iBAAOJ,EAAEI,OAAO,CAAgB,IAAIC,KAAKL,EAAEI,OAAO,EAAIJ,EAAEI,OAAO,EAAEE,WAAW,GAAG,CAAC,CAChJ,WAAYN,GAAK,iBAAOA,EAAEO,MAAM,EAAiB,CAAC,QAAQ,EAAEP,EAAEO,MAAM,CAAC,CAAC,CACtE,WAAYP,GAAKA,EAAEQ,MAAM,EAAI,CAAC,OAAO,EAAER,EAAEQ,MAAM,CAAC,CAAC,CACjD,WAAYR,GAAKA,EAAES,MAAM,EAAI,SAC7B,aAAcT,GAAKA,EAAEU,QAAQ,EAAI,WACjC,aAAcV,GAAKA,EAAEW,QAAQ,EAAI,CAAC,SAAS,EAAEX,EAAEW,QAAQ,CAAC,CAAC,CACzD,aAAcX,GAAKA,EAAEY,QAAQ,EAAI,CAAC,SAAS,EAAEZ,EAAEY,QAAQ,CAAC,CAAC,CAC1D,CAACC,MAAM,CAACC,SACT,MAAO,CAAC,EAAEd,EAAEe,IAAI,CAAC,CAAC,EAAEC,mBAAmB,MAACf,CAAAA,EAAKD,EAAEjB,KAAK,EAAYkB,EAAK,IAAI,EAAE,EAAEC,EAAMe,IAAI,CAAC,MAAM,CAAC,CAEjG,SAASC,EAAYC,CAAM,EACzB,IAAMC,EAAsB,IAAIC,IAChC,IAAK,IAAMC,KAAQH,EAAOI,KAAK,CAAC,OAAQ,CACtC,GAAI,CAACD,EACH,SACF,IAAME,EAAUF,EAAKG,OAAO,CAAC,KAC7B,GAAID,KAAAA,EAAgB,CAClBJ,EAAIM,GAAG,CAACJ,EAAM,QACd,QACF,CACA,GAAM,CAACK,EAAK5C,EAAM,CAAG,CAACuC,EAAKM,KAAK,CAAC,EAAGJ,GAAUF,EAAKM,KAAK,CAACJ,EAAU,GAAG,CACtE,GAAI,CACFJ,EAAIM,GAAG,CAACC,EAAKE,mBAAmB9C,MAAAA,EAAgBA,EAAQ,QAC1D,CAAE,KAAM,CACR,CACF,CACA,OAAOqC,CACT,CACA,SAASU,EAAeC,CAAS,MAyCVC,EAKAA,EA7CrB,GAAI,CAACD,EACH,OAEF,GAAM,CAAC,CAAChB,EAAMhC,EAAM,CAAE,GAAGkD,EAAW,CAAGf,EAAYa,GAC7C,CACJvB,OAAAA,CAAM,CACNJ,QAAAA,CAAO,CACP8B,SAAAA,CAAQ,CACRC,OAAAA,CAAM,CACNhC,KAAAA,CAAI,CACJiC,SAAAA,CAAQ,CACR3B,OAAAA,CAAM,CACNG,SAAAA,CAAQ,CACT,CAAGvB,OAAOgD,WAAW,CACpBJ,EAAWb,GAAG,CAAC,CAAC,CAACO,EAAKW,EAAO,GAAK,CAACX,EAAIY,WAAW,GAAID,EAAO,GAc/D,OAAOE,SAEQC,CAAC,EAChB,IAAMC,EAAO,CAAC,EACd,IAAK,IAAMf,KAAOc,EACZA,CAAC,CAACd,EAAI,EACRe,CAAAA,CAAI,CAACf,EAAI,CAAGc,CAAC,CAACd,EAAI,EAGtB,OAAOe,CACT,EAtBiB,CACb3B,KAAAA,EACAhC,MAAO8C,mBAAmB9C,GAC1ByB,OAAAA,EACA,GAAGJ,GAAW,CAAEA,QAAS,IAAIC,KAAKD,EAAS,CAAC,CAC5C,GAAG8B,GAAY,CAAExB,SAAU,EAAK,CAAC,CACjC,GAAG,iBAAOyB,GAAuB,CAAE5B,OAAQoC,OAAOR,EAAQ,CAAC,CAC3DhC,KAAAA,EACA,GAAGiC,GAAY,CAAEzB,SAkBZiC,EAAU5D,QAAQ,CADzBgD,EAASA,CADYA,EAhBsBI,GAiB3BG,WAAW,IACSP,EAAS,KAAK,CAlBG,CAAC,CACpD,GAAGvB,GAAU,CAAEA,OAAQ,EAAK,CAAC,CAC7B,GAAGG,GAAY,CAAEA,SAqBZiC,EAAS7D,QAAQ,CADxBgD,EAASA,CADYA,EAnBsBpB,GAoB3B2B,WAAW,IACQP,EAAS,KAAK,CArBI,CAAC,EAGxD,CAxEAc,CAhBe,CAACC,EAAQC,KACtB,IAAK,IAAIjC,KAAQiC,EACf5D,EAAU2D,EAAQhC,EAAM,CAAE/G,IAAKgJ,CAAG,CAACjC,EAAK,CAAEkC,WAAY,EAAK,EAC/D,GAaSnD,EAAa,CACpBoD,eAAgB,IAAMA,EACtBC,gBAAiB,IAAMA,EACvBjC,YAAa,IAAMA,EACnBY,eAAgB,IAAMA,EACtB/B,gBAAiB,IAAMA,CACzB,GACA1H,EAAOC,OAAO,CAXc8K,CARV,CAACC,EAAIC,EAAMC,EAAQC,KACnC,GAAIF,GAAQ,iBAAOA,GAAqB,mBAAOA,EAC7C,IAAK,IAAI3B,KAAOlC,EAAkB6D,GAC3B3D,EAAa8D,IAAI,CAACJ,EAAI1B,IAAQA,KAHZ4B,IAGY5B,GACjCvC,EAAUiE,EAAI1B,EAAK,CAAE3H,IAAK,IAAMsJ,CAAI,CAAC3B,EAAI,CAAEsB,WAAY,CAAEO,CAAAA,EAAOjE,EAAiB+D,EAAM3B,EAAAA,GAAS6B,EAAKP,UAAU,GAErH,OAAOI,CACT,GACwCjE,EAAU,CAAC,EAAG,aAAc,CAAEL,MAAO,EAAK,GAWpDe,GA2E9B,IAAI8C,EAAY,CAAC,SAAU,MAAO,OAAO,CAKrCC,EAAW,CAAC,MAAO,SAAU,OAAO,CA0DpCK,EAAiB,MACnBQ,YAAYC,CAAc,CAAE,CAE1B,IAAI,CAACC,OAAO,CAAmB,IAAIvC,IACnC,IAAI,CAACwC,QAAQ,CAAGF,EAChB,IAAMG,EAASH,EAAe3J,GAAG,CAAC,UAClC,GAAI8J,EAEF,IAAK,GAAM,CAAC/C,EAAMhC,EAAM,GADTmC,EAAY4C,GAEzB,IAAI,CAACF,OAAO,CAAClC,GAAG,CAACX,EAAM,CAAEA,KAAAA,EAAMhC,MAAAA,CAAM,EAG3C,CACA,CAACgF,OAAOC,QAAQ,CAAC,EAAG,CAClB,OAAO,IAAI,CAACJ,OAAO,CAACG,OAAOC,QAAQ,CAAC,EACtC,CAIA,IAAIC,MAAO,CACT,OAAO,IAAI,CAACL,OAAO,CAACK,IAAI,CAE1BjK,IAAI,GAAGd,CAAI,CAAE,CACX,IAAM6H,EAAO,iBAAO7H,CAAI,CAAC,EAAE,CAAgBA,CAAI,CAAC,EAAE,CAAGA,CAAI,CAAC,EAAE,CAAC6H,IAAI,CACjE,OAAO,IAAI,CAAC6C,OAAO,CAAC5J,GAAG,CAAC+G,EAC1B,CACAmD,OAAO,GAAGhL,CAAI,CAAE,CACd,IAAI+G,EACJ,IAAM+C,EAAMmB,MAAMb,IAAI,CAAC,IAAI,CAACM,OAAO,EACnC,GAAI,CAAC1K,EAAKkL,MAAM,CACd,OAAOpB,EAAI5B,GAAG,CAAC,CAAC,CAACtH,EAAGiF,EAAM,GAAKA,GAEjC,IAAMgC,EAAO,iBAAO7H,CAAI,CAAC,EAAE,CAAgBA,CAAI,CAAC,EAAE,CAAG,MAAC+G,CAAAA,EAAK/G,CAAI,CAAC,EAAE,EAAY,KAAK,EAAI+G,EAAGc,IAAI,CAC9F,OAAOiC,EAAInC,MAAM,CAAC,CAAC,CAACwD,EAAE,GAAKA,IAAMtD,GAAMK,GAAG,CAAC,CAAC,CAACtH,EAAGiF,EAAM,GAAKA,EAC7D,CACAuF,IAAIvD,CAAI,CAAE,CACR,OAAO,IAAI,CAAC6C,OAAO,CAACU,GAAG,CAACvD,EAC1B,CACAW,IAAI,GAAGxI,CAAI,CAAE,CACX,GAAM,CAAC6H,EAAMhC,EAAM,CAAG7F,IAAAA,EAAKkL,MAAM,CAAS,CAAClL,CAAI,CAAC,EAAE,CAAC6H,IAAI,CAAE7H,CAAI,CAAC,EAAE,CAAC6F,KAAK,CAAC,CAAG7F,EACpEkI,EAAM,IAAI,CAACwC,OAAO,CAMxB,OALAxC,EAAIM,GAAG,CAACX,EAAM,CAAEA,KAAAA,EAAMhC,MAAAA,CAAM,GAC5B,IAAI,CAAC8E,QAAQ,CAACnC,GAAG,CACf,SACAyC,MAAMb,IAAI,CAAClC,GAAKA,GAAG,CAAC,CAAC,CAACtH,EAAGwI,EAAO,GAAKvC,EAAgBuC,IAASrB,IAAI,CAAC,OAE9D,IAAI,CAKbsD,OAAOC,CAAK,CAAE,CACZ,IAAMpD,EAAM,IAAI,CAACwC,OAAO,CAClBa,EAAS,MAAOC,OAAO,CAACF,GAA6BA,EAAMpD,GAAG,CAAC,GAAUA,EAAImD,MAAM,CAACxD,IAAnDK,EAAImD,MAAM,CAACC,GAKlD,OAJA,IAAI,CAACX,QAAQ,CAACnC,GAAG,CACf,SACAyC,MAAMb,IAAI,CAAClC,GAAKA,GAAG,CAAC,CAAC,CAACtH,EAAGiF,EAAM,GAAKgB,EAAgBhB,IAAQkC,IAAI,CAAC,OAE5DwD,CACT,CAIAE,OAAQ,CAEN,OADA,IAAI,CAACJ,MAAM,CAACJ,MAAMb,IAAI,CAAC,IAAI,CAACM,OAAO,CAACgB,IAAI,KACjC,IAAI,CAKb,CAACb,OAAOc,GAAG,CAAC,+BAA+B,EAAG,CAC5C,MAAO,CAAC,eAAe,EAAEC,KAAKC,SAAS,CAAC1F,OAAOgD,WAAW,CAAC,IAAI,CAACuB,OAAO,GAAG,CAAC,CAE7EoB,UAAW,CACT,MAAO,IAAI,IAAI,CAACpB,OAAO,CAAC9E,MAAM,GAAG,CAACsC,GAAG,CAAC,GAAO,CAAC,EAAE6D,EAAElE,IAAI,CAAC,CAAC,EAAEC,mBAAmBiE,EAAElG,KAAK,EAAE,CAAC,EAAEkC,IAAI,CAAC,KAChG,CACF,EAGIkC,EAAkB,MACpBO,YAAYwB,CAAe,CAAE,KAGvBjF,EAAIkF,EAAIC,CADZ,KAAI,CAACxB,OAAO,CAAmB,IAAIvC,IAEnC,IAAI,CAACwC,QAAQ,CAAGqB,EAChB,IAAMnD,EAAY,MAACqD,CAAAA,EAAK,MAACD,CAAAA,EAAK,MAAClF,CAAAA,EAAKiF,EAAgBG,YAAY,EAAY,KAAK,EAAIpF,EAAGwD,IAAI,CAACyB,EAAAA,EAA4BC,EAAKD,EAAgBlL,GAAG,CAAC,eAAyBoL,EAAK,EAAE,CAElL,IAAK,IAAME,KADWnB,MAAMO,OAAO,CAAC3C,GAAaA,EAAYwD,SA3IrCC,CAAa,EACvC,GAAI,CAACA,EACH,MAAO,EAAE,CACX,IAEIC,EACAC,EACAC,EACAC,EACAC,EANAC,EAAiB,EAAE,CACnBC,EAAM,EAMV,SAASC,IACP,KAAOD,EAAMP,EAAcpB,MAAM,EAAI,KAAK6B,IAAI,CAACT,EAAcU,MAAM,CAACH,KAClEA,GAAO,EAET,OAAOA,EAAMP,EAAcpB,MAAM,CAMnC,KAAO2B,EAAMP,EAAcpB,MAAM,EAAE,CAGjC,IAFAqB,EAAQM,EACRF,EAAwB,GACjBG,KAEL,GAAIN,MADJA,CAAAA,EAAKF,EAAcU,MAAM,CAACH,EAAAA,EACV,CAKd,IAJAJ,EAAYI,EACZA,GAAO,EACPC,IACAJ,EAAYG,EACLA,EAAMP,EAAcpB,MAAM,EAZ9BsB,MADPA,CAAAA,EAAKF,EAAcU,MAAM,CAACH,EAAAA,GACLL,MAAAA,GAAcA,MAAAA,GAa7BK,GAAO,CAELA,CAAAA,EAAMP,EAAcpB,MAAM,EAAIoB,MAAAA,EAAcU,MAAM,CAACH,IACrDF,EAAwB,GACxBE,EAAMH,EACNE,EAAeK,IAAI,CAACX,EAAcY,SAAS,CAACX,EAAOE,IACnDF,EAAQM,GAERA,EAAMJ,EAAY,CAEtB,MACEI,GAAO,EAGP,EAACF,GAAyBE,GAAOP,EAAcpB,MAAM,GACvD0B,EAAeK,IAAI,CAACX,EAAcY,SAAS,CAACX,EAAOD,EAAcpB,MAAM,EAE3E,CACA,OAAO0B,CACT,EAyFoF/D,GACtC,CACxC,IAAMsE,EAASvE,EAAewD,GAC1Be,GACF,IAAI,CAACzC,OAAO,CAAClC,GAAG,CAAC2E,EAAOtF,IAAI,CAAEsF,EAClC,CACF,CAIArM,IAAI,GAAGd,CAAI,CAAE,CACX,IAAMyI,EAAM,iBAAOzI,CAAI,CAAC,EAAE,CAAgBA,CAAI,CAAC,EAAE,CAAGA,CAAI,CAAC,EAAE,CAAC6H,IAAI,CAChE,OAAO,IAAI,CAAC6C,OAAO,CAAC5J,GAAG,CAAC2H,EAC1B,CAIAuC,OAAO,GAAGhL,CAAI,CAAE,CACd,IAAI+G,EACJ,IAAM+C,EAAMmB,MAAMb,IAAI,CAAC,IAAI,CAACM,OAAO,CAAC9E,MAAM,IAC1C,GAAI,CAAC5F,EAAKkL,MAAM,CACd,OAAOpB,EAET,IAAMrB,EAAM,iBAAOzI,CAAI,CAAC,EAAE,CAAgBA,CAAI,CAAC,EAAE,CAAG,MAAC+G,CAAAA,EAAK/G,CAAI,CAAC,EAAE,EAAY,KAAK,EAAI+G,EAAGc,IAAI,CAC7F,OAAOiC,EAAInC,MAAM,CAAC,GAAOb,EAAEe,IAAI,GAAKY,EACtC,CACA2C,IAAIvD,CAAI,CAAE,CACR,OAAO,IAAI,CAAC6C,OAAO,CAACU,GAAG,CAACvD,EAC1B,CAIAW,IAAI,GAAGxI,CAAI,CAAE,CACX,GAAM,CAAC6H,EAAMhC,EAAOoC,EAAO,CAAGjI,IAAAA,EAAKkL,MAAM,CAAS,CAAClL,CAAI,CAAC,EAAE,CAAC6H,IAAI,CAAE7H,CAAI,CAAC,EAAE,CAAC6F,KAAK,CAAE7F,CAAI,CAAC,EAAE,CAAC,CAAGA,EACrFkI,EAAM,IAAI,CAACwC,OAAO,CAGxB,OAFAxC,EAAIM,GAAG,CAACX,EAAMuF,SAyBOnF,EAAS,CAAEJ,KAAM,GAAIhC,MAAO,EAAG,CAAC,EAUvD,MAT8B,UAA1B,OAAOoC,EAAOf,OAAO,EACvBe,CAAAA,EAAOf,OAAO,CAAG,IAAIC,KAAKc,EAAOf,OAAO,GAEtCe,EAAOZ,MAAM,EACfY,CAAAA,EAAOf,OAAO,CAAG,IAAIC,KAAKA,KAAKkG,GAAG,GAAKpF,IAAAA,EAAOZ,MAAM,CAAG,EAErDY,CAAAA,OAAAA,EAAOhB,IAAI,EAAagB,KAAqB,IAArBA,EAAOhB,IAAI,GACrCgB,CAAAA,EAAOhB,IAAI,CAAG,KAETgB,CACT,EApCkC,CAAEJ,KAAAA,EAAMhC,MAAAA,EAAO,GAAGoC,CAAM,IACtDqF,SAiBaC,CAAG,CAAEpN,CAAO,EAE3B,IAAK,GAAM,EAAG0F,EAAM,GADpB1F,EAAQkL,MAAM,CAAC,cACSkC,GAAK,CAC3B,IAAMC,EAAa3G,EAAgBhB,GACnC1F,EAAQsN,MAAM,CAAC,aAAcD,EAC/B,CACF,EAvBYtF,EAAK,IAAI,CAACyC,QAAQ,EACnB,IAAI,CAKbU,OAAO,GAAGrL,CAAI,CAAE,CACd,GAAM,CAAC6H,EAAMZ,EAAMK,EAAO,CAAG,iBAAOtH,CAAI,CAAC,EAAE,CAAgB,CAACA,CAAI,CAAC,EAAE,CAAC,CAAG,CAACA,CAAI,CAAC,EAAE,CAAC6H,IAAI,CAAE7H,CAAI,CAAC,EAAE,CAACiH,IAAI,CAAEjH,CAAI,CAAC,EAAE,CAACsH,MAAM,CAAC,CACnH,OAAO,IAAI,CAACkB,GAAG,CAAC,CAAEX,KAAAA,EAAMZ,KAAAA,EAAMK,OAAAA,EAAQzB,MAAO,GAAIqB,QAAyB,IAAIC,KAAK,EAAG,EACxF,CACA,CAAC0D,OAAOc,GAAG,CAAC,+BAA+B,EAAG,CAC5C,MAAO,CAAC,gBAAgB,EAAEC,KAAKC,SAAS,CAAC1F,OAAOgD,WAAW,CAAC,IAAI,CAACuB,OAAO,GAAG,CAAC,CAE9EoB,UAAW,CACT,MAAO,IAAI,IAAI,CAACpB,OAAO,CAAC9E,MAAM,GAAG,CAACsC,GAAG,CAACrB,GAAiBkB,IAAI,CAAC,KAC9D,CACF,mBCvSQ5I,EAAAA,OAAAA,CAAAA,EAAAA,wBCRRgH,OAAAA,cAAAA,CAAAA,EAAAA,aAA6C,CACzCN,MAAO,EACX,GAWA6H,SANiB7D,CAAM,CAAEC,CAAG,EACxB,IAAI,IAAIjC,KAAQiC,EAAI3D,OAAOC,cAAc,CAACyD,EAAQhC,EAAM,CACpDkC,WAAY,GACZjJ,IAAKgJ,CAAG,CAACjC,EAAK,EAEtB,EACQzI,EAAS,CACb4K,eAAgB,WACZ,OAAO2D,EAAS3D,cAAc,EAElCC,gBAAiB,WACb,OAAO0D,EAAS1D,eAAe,CAEvC,GACA,IAAM0D,EAAWtO,EAAQ,yCCXzB,IAAAuO,EATa,GAAIC,WAAAA,IAAIA,CAAC,CACpBhM,KAAMpC,QAAQC,GAAG,CAACoO,aAAa,CAC/BC,SAAUtO,QAAQC,GAAG,CAACsO,iBAAiB,CACvCC,KAAMxO,QAAQC,GAAG,CAACwO,aAAa,CAC/BC,KAAMC,SAAS3O,QAAQC,GAAG,CAAC2O,aAAa,EAAI,QAC5CC,SAAU7O,QAAQC,GAAG,CAAC6O,WAAW,CACjCC,IAA6C,CAAEC,mBAAoB,EAAM,CAC3E,mDCLO,OAAMpM,EACX,aAAaqM,OAAOC,CAAc,CAAEC,CAAsB,CAAoB,CAC5E,IAAMC,EAAS,CAAC,aAAc1I,OAAOuF,IAAI,CAACkD,GAAM,CAC1ChJ,EAAS,CAAC+I,KAAWxI,OAAOP,MAAM,CAACgJ,GAAM,CACzCE,EAAeD,EAAO3G,GAAG,CAAC,CAACtH,EAAGmO,IAAM,CAAC,CAAC,EAAEA,EAAI,EAAE,CAAC,EAAEhH,IAAI,CAAC,MAEtDiH,EAAQ,CAAC;4BACS,EAAEH,EAAO9G,IAAI,CAAC,MAAM;cAClC,EAAE+G,EAAa;;IAEzB,CAAC,CAGD,MAAOvD,CAD8B,MAAM0D,EAAAA,CAAIA,CAACD,KAAK,CAACA,EAAOpJ,EAAAA,EAC/CsJ,IAAI,CAAC,EAAE,CAGvB,aAAa5M,aAAaqM,CAAc,CAA2B,CAGjE,MAAOpD,CAD8B,MAAM0D,EAAAA,CAAIA,CAACD,KAAK,CADvC,4CAC+C,CAACL,EAAO,GACvDO,IAAI,CAAC,EAAE,EAAI,IAC3B,CAEA,aAAaC,OAAOR,CAAc,CAAES,CAAyB,CAA2B,CACtF,IAAMC,EAAiB,CACrB,eACA,MACA,aACA,oBACA,aACA,cACA,eACD,CAEKC,EAAenJ,OAAOuF,IAAI,CAAC0D,GAASzH,MAAM,CAACc,GAAO4G,EAAevJ,QAAQ,CAAC2C,IAChF,GAAI6G,IAAAA,EAAapE,MAAM,CAAQ,OAAO,KAEtC,IAAMqE,EAAYD,EAAapH,GAAG,CAAC,CAACsH,EAAOC,IAAU,CAAC,EAAED,EAAM,IAAI,EAAEC,EAAQ,EAAE,CAAC,EAAE1H,IAAI,CAAC,MAChFnC,EAAS0J,EAAapH,GAAG,CAACsH,IAC9B,IAAM3J,EAAQuJ,CAAO,CAACI,EAAuB,CAC7C,MAAO,CAAC,oBAAqB,eAAe,CAAC1J,QAAQ,CAAC0J,GAAS5D,KAAKC,SAAS,CAAChG,GAASA,CACzF,GAEMmJ,EAAQ,CAAC;;UAET,EAAEO,EAAU;;;IAGlB,CAAC,CAGD,MAAOhE,CAD8B,MAAM0D,EAAAA,CAAIA,CAACD,KAAK,CAACA,EAAO,CAACL,KAAW/I,EAAO,GAClEsJ,IAAI,CAAC,EAAE,EAAI,IAC3B,CAEA,aAAa7D,OAAOsD,CAAc,CAAoB,CAGpD,MAAOpD,CADQ,MAAM0D,EAAAA,CAAIA,CAACD,KAAK,CADjB,uDACyB,CAACL,EAAO,GACjCe,QAAQ,CAAG,CAC3B,CAEA,aAAaC,SAAShB,CAAc,CAAuC,CAEzE,IAAMpD,EAAS,MAAM0D,EAAAA,CAAIA,CAACD,KAAK,CADjB,4DACyB,CAACL,EAAO,EAC/C,OAAOpD,EAAO2D,IAAI,CAAC,EAAE,EAAEU,mBAAqB,IAC9C,CAEA,aAAaC,YAAYlB,CAAc,CAAEmB,CAA0B,CAAoB,CACrF,IAAMd,EAAQ,CAAC;;;;IAIf,CAAC,CAED,MAAOzD,CADQ,MAAM0D,EAAAA,CAAIA,CAACD,KAAK,CAACA,EAAO,CAACL,EAAQ/C,KAAKC,SAAS,CAACiE,GAAO,GACxDJ,QAAQ,CAAG,CAC3B,CACF,gDC1EO,OAAM5N,EACX,aAAa4M,OAAO9M,CAAgB,CAAEa,CAAc,CAAEsN,CAAmB,CAAiB,CACxF,IAAMf,EAAQ,CAAC;;;;IAIf,CAAC,CAGD,MAAOzD,CAD2B,MAAM0D,EAAAA,CAAIA,CAACD,KAAK,CAACA,EAAO,CAACpN,EAAUa,EAAOsN,EAAW,GACzEb,IAAI,CAAC,EAAE,CAGvB,aAAac,SAASzN,CAAU,CAAwB,CAGtD,MAAOgJ,CAD2B,MAAM0D,EAAAA,CAAIA,CAACD,KAAK,CADpC,oCAC4C,CAACzM,EAAG,GAChD2M,IAAI,CAAC,EAAE,EAAI,IAC3B,CAEA,aAAanN,eAAeH,CAAgB,CAAwB,CAGlE,MAAO2J,CAD2B,MAAM0D,EAAAA,CAAIA,CAACD,KAAK,CADpC,0CAC4C,CAACpN,EAAS,GACtDsN,IAAI,CAAC,EAAE,EAAI,IAC3B,CAEA,aAAaC,OAAO5M,CAAU,CAAE6M,CAAsB,CAAwB,CAC5E,IAAMC,EAAiB,CAAC,WAAY,QAAS,cAAc,CACrDC,EAAenJ,OAAOuF,IAAI,CAAC0D,GAASzH,MAAM,CAACc,GAAO4G,EAAevJ,QAAQ,CAAC2C,IAEhF,GAAI6G,IAAAA,EAAapE,MAAM,CAAQ,OAAO,KAEtC,IAAMqE,EAAYD,EAAapH,GAAG,CAAC,CAACsH,EAAOC,IAAU,CAAC,EAAED,EAAM,IAAI,EAAEC,EAAQ,EAAE,CAAC,EAAE1H,IAAI,CAAC,MAChFnC,EAAS0J,EAAapH,GAAG,CAACsH,GAASJ,CAAO,CAACI,EAAoB,EAE/DR,EAAQ,CAAC;;UAET,EAAEO,EAAU;;;IAGlB,CAAC,CAGD,MAAOhE,CAD2B,MAAM0D,EAAAA,CAAIA,CAACD,KAAK,CAACA,EAAO,CAACzM,KAAOqD,EAAO,GAC3DsJ,IAAI,CAAC,EAAE,EAAI,IAC3B,CAEA,aAAa7D,OAAO9I,CAAU,CAAoB,CAGhD,MAAO,CAACgJ,CADO,MAAM0D,EAAAA,CAAIA,CAACD,KAAK,CADjB,+CACyB,CAACzM,EAAG,GAC5BmN,QAAQ,EAAI,GAAK,CAClC,CAEA,aAAaO,KAAKC,EAAgB,EAAE,CAAEC,EAAiB,CAAC,CAAmB,CAGzE,MAAO5E,CAD2B,MAAM0D,EAAAA,CAAIA,CAACD,KAAK,CADpC,kEAC4C,CAACkB,EAAOC,EAAO,GAC3DjB,IAAI,CAEtB","sources":["webpack://basednet/external commonjs \"@sentry/nextjs\"","webpack://basednet/external commonjs \"next/dist/client/components/request-async-storage.external.js\"","webpack://basednet/external commonjs \"next/dist/compiled/next-server/app-route.runtime.prod.js\"","webpack://basednet/external commonjs \"pg\"","webpack://basednet/src/app/api/users/[username]/route.ts","webpack://basednet/sentry-wrapper-module","webpack://basednet/?9449","webpack://basednet/./sentry.server.config.ts","webpack://basednet/./node_modules/next/dist/compiled/@edge-runtime/cookies/index.js","webpack://basednet/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js","webpack://basednet/./node_modules/next/dist/server/web/spec-extension/cookies.js","webpack://basednet/./src/db/config.ts","webpack://basednet/./src/db/models/profile.ts","webpack://basednet/./src/db/models/user.ts","webpack://basednet/<anon>"],"sourcesContent":["module.exports = require(\"@sentry/nextjs\");","module.exports = require(\"next/dist/client/components/request-async-storage.external.js\");","module.exports = require(\"next/dist/compiled/next-server/app-route.runtime.prod.js\");","module.exports = require(\"pg\");","import { NextRequest, NextResponse } from 'next/server';\r\nimport { UserModel } from '../../../../db/models/user';\r\nimport { ProfileModel } from '../../../../db/models/profile';\r\n\r\nexport async function GET(\r\n  req: NextRequest,\r\n  { params }: { params: { username: string } }\r\n) {\r\n  try {\r\n    const { username } = params;\r\n    const user = await UserModel.findByUsername(username);\r\n\r\n    if (!user) {\r\n      return NextResponse.json(\r\n        { error: 'User not found' },\r\n        { status: 404 }\r\n      );\r\n    }\r\n\r\n    // Get user profile\r\n    const profile = await ProfileModel.findByUserId(user.id);\r\n\r\n    // Return user with profile but exclude sensitive information\r\n    const { auth_domain, email, ...safeUser } = user;\r\n    \r\n    return NextResponse.json({\r\n      user: safeUser,\r\n      profile\r\n    });\r\n  } catch (error) {\r\n    console.error('Error fetching user:', error);\r\n    return NextResponse.json(\r\n      { error: 'Failed to fetch user' },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}\r\n","import { _nullishCoalesce, _optionalChain } from '@sentry/utils';\nimport * as Sentry from '@sentry/nextjs';\nimport { requestAsyncStorage } from 'next/dist/client/components/request-async-storage.external.js';\nimport * as serverComponentModule from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\nexport * from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\nexport {} from '__SENTRY_WRAPPING_TARGET_FILE__.cjs';\n\nfunction wrapHandler(handler, method) {\n  // Running the instrumentation code during the build phase will mark any function as \"dynamic\" because we're accessing\n  // the Request object. We do not want to turn handlers dynamic so we skip instrumentation in the build phase.\n  if (process.env.NEXT_PHASE === 'phase-production-build') {\n    return handler;\n  }\n\n  if (typeof handler !== 'function') {\n    return handler;\n  }\n\n  return new Proxy(handler, {\n    apply: (originalFunction, thisArg, args) => {\n      let sentryTraceHeader = undefined;\n      let baggageHeader = undefined;\n      let headers = undefined;\n\n      // We try-catch here just in case the API around `requestAsyncStorage` changes unexpectedly since it is not public API\n      try {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        const requestAsyncStore = requestAsyncStorage.getStore() ;\n        sentryTraceHeader = _nullishCoalesce(_optionalChain([requestAsyncStore, 'optionalAccess', _ => _.headers, 'access', _2 => _2.get, 'call', _3 => _3('sentry-trace')]), () => ( undefined));\n        baggageHeader = _nullishCoalesce(_optionalChain([requestAsyncStore, 'optionalAccess', _4 => _4.headers, 'access', _5 => _5.get, 'call', _6 => _6('baggage')]), () => ( undefined));\n        headers = _optionalChain([requestAsyncStore, 'optionalAccess', _7 => _7.headers]);\n      } catch (e) {\n        /** empty */\n      }\n\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access, @typescript-eslint/no-explicit-any\n      return Sentry.wrapRouteHandlerWithSentry(originalFunction , {\n        method,\n        parameterizedRoute: '/api/users/[username]',\n        sentryTraceHeader,\n        baggageHeader,\n        headers,\n      }).apply(thisArg, args);\n    },\n  });\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst GET = wrapHandler(serverComponentModule.GET , 'GET');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst POST = wrapHandler(serverComponentModule.POST , 'POST');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst PUT = wrapHandler(serverComponentModule.PUT , 'PUT');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst PATCH = wrapHandler(serverComponentModule.PATCH , 'PATCH');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst DELETE = wrapHandler(serverComponentModule.DELETE , 'DELETE');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst HEAD = wrapHandler(serverComponentModule.HEAD , 'HEAD');\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\nconst OPTIONS = wrapHandler(serverComponentModule.OPTIONS , 'OPTIONS');\n\nexport { DELETE, GET, HEAD, OPTIONS, PATCH, POST, PUT };\n","import { AppRouteRouteModule } from \"next/dist/server/future/route-modules/app-route/module.compiled\";\nimport { RouteKind } from \"next/dist/server/future/route-kind\";\nimport { patchFetch as _patchFetch } from \"next/dist/server/lib/patch-fetch\";\nimport * as userland from \"C:\\\\Users\\\\adoni\\\\Desktop\\\\projects\\\\basednet\\\\src\\\\app\\\\api\\\\users\\\\[username]\\\\route.ts\";\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new AppRouteRouteModule({\n    definition: {\n        kind: RouteKind.APP_ROUTE,\n        page: \"/api/users/[username]/route\",\n        pathname: \"/api/users/[username]\",\n        filename: \"route\",\n        bundlePath: \"app/api/users/[username]/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\adoni\\\\Desktop\\\\projects\\\\basednet\\\\src\\\\app\\\\api\\\\users\\\\[username]\\\\route.ts\",\n    nextConfigOutput,\n    userland\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/users/[username]/route\";\nfunction patchFetch() {\n    return _patchFetch({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\nexport { routeModule, requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout, originalPathname, patchFetch,  };\n\n//# sourceMappingURL=app-route.js.map","var _sentryCollisionFreeGlobalObject = typeof window != \"undefined\" ? window : typeof global != \"undefined\" ? global : typeof self != \"undefined\" ? self : {};\n_sentryCollisionFreeGlobalObject[\"__sentryRewritesTunnelPath__\"] = undefined;\n_sentryCollisionFreeGlobalObject[\"SENTRY_RELEASE\"] = {\"id\":\"wdkRqJwFkIUdQPuSy7-Vq\"};\n_sentryCollisionFreeGlobalObject[\"__sentryBasePath\"] = undefined;\n_sentryCollisionFreeGlobalObject[\"__rewriteFramesDistDir__\"] = \".next\";\n\nimport * as Sentry from '@sentry/nextjs'\r\n\r\nSentry.init({\r\n  dsn: process.env.SENTRY_DSN,\r\n  \r\n  // Performance Monitoring\r\n  tracesSampleRate: 0.1, // Capture 10% of transactions for performance monitoring\r\n  \r\n  // Enable automatic instrumentation for Next.js\r\n  integrations: [\r\n    new Sentry.BrowserTracing({\r\n      // Set sampling rate for performance monitoring\r\n      tracePropagationTargets: ['localhost', /^https:\\/\\/[^/]*\\.basednet\\.com/],\r\n    }),\r\n  ],\r\n\r\n  // Environment-specific configuration\r\n  environment: process.env.NODE_ENV,\r\n  \r\n  // Error filtering\r\n  beforeSend(event) {\r\n    // Don't send errors in development\r\n    if (process.env.NODE_ENV === 'development') {\r\n      return null\r\n    }\r\n    \r\n    // Filter out specific errors\r\n    if (event.exception) {\r\n      const exceptionValue = event.exception.values?.[0]?.value\r\n      if (exceptionValue?.includes('ResizeObserver loop')) {\r\n        return null\r\n      }\r\n    }\r\n    \r\n    return event\r\n  },\r\n\r\n  // Additional configuration\r\n  debug: process.env.NODE_ENV === 'development',\r\n  maxBreadcrumbs: 50,\r\n  attachStacktrace: true,\r\n})\r\n","\"use strict\";\nvar __defProp = Object.defineProperty;\nvar __getOwnPropDesc = Object.getOwnPropertyDescriptor;\nvar __getOwnPropNames = Object.getOwnPropertyNames;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __copyProps = (to, from, except, desc) => {\n  if (from && typeof from === \"object\" || typeof from === \"function\") {\n    for (let key of __getOwnPropNames(from))\n      if (!__hasOwnProp.call(to, key) && key !== except)\n        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });\n  }\n  return to;\n};\nvar __toCommonJS = (mod) => __copyProps(__defProp({}, \"__esModule\", { value: true }), mod);\n\n// src/index.ts\nvar src_exports = {};\n__export(src_exports, {\n  RequestCookies: () => RequestCookies,\n  ResponseCookies: () => ResponseCookies,\n  parseCookie: () => parseCookie,\n  parseSetCookie: () => parseSetCookie,\n  stringifyCookie: () => stringifyCookie\n});\nmodule.exports = __toCommonJS(src_exports);\n\n// src/serialize.ts\nfunction stringifyCookie(c) {\n  var _a;\n  const attrs = [\n    \"path\" in c && c.path && `Path=${c.path}`,\n    \"expires\" in c && (c.expires || c.expires === 0) && `Expires=${(typeof c.expires === \"number\" ? new Date(c.expires) : c.expires).toUTCString()}`,\n    \"maxAge\" in c && typeof c.maxAge === \"number\" && `Max-Age=${c.maxAge}`,\n    \"domain\" in c && c.domain && `Domain=${c.domain}`,\n    \"secure\" in c && c.secure && \"Secure\",\n    \"httpOnly\" in c && c.httpOnly && \"HttpOnly\",\n    \"sameSite\" in c && c.sameSite && `SameSite=${c.sameSite}`,\n    \"priority\" in c && c.priority && `Priority=${c.priority}`\n  ].filter(Boolean);\n  return `${c.name}=${encodeURIComponent((_a = c.value) != null ? _a : \"\")}; ${attrs.join(\"; \")}`;\n}\nfunction parseCookie(cookie) {\n  const map = /* @__PURE__ */ new Map();\n  for (const pair of cookie.split(/; */)) {\n    if (!pair)\n      continue;\n    const splitAt = pair.indexOf(\"=\");\n    if (splitAt === -1) {\n      map.set(pair, \"true\");\n      continue;\n    }\n    const [key, value] = [pair.slice(0, splitAt), pair.slice(splitAt + 1)];\n    try {\n      map.set(key, decodeURIComponent(value != null ? value : \"true\"));\n    } catch {\n    }\n  }\n  return map;\n}\nfunction parseSetCookie(setCookie) {\n  if (!setCookie) {\n    return void 0;\n  }\n  const [[name, value], ...attributes] = parseCookie(setCookie);\n  const {\n    domain,\n    expires,\n    httponly,\n    maxage,\n    path,\n    samesite,\n    secure,\n    priority\n  } = Object.fromEntries(\n    attributes.map(([key, value2]) => [key.toLowerCase(), value2])\n  );\n  const cookie = {\n    name,\n    value: decodeURIComponent(value),\n    domain,\n    ...expires && { expires: new Date(expires) },\n    ...httponly && { httpOnly: true },\n    ...typeof maxage === \"string\" && { maxAge: Number(maxage) },\n    path,\n    ...samesite && { sameSite: parseSameSite(samesite) },\n    ...secure && { secure: true },\n    ...priority && { priority: parsePriority(priority) }\n  };\n  return compact(cookie);\n}\nfunction compact(t) {\n  const newT = {};\n  for (const key in t) {\n    if (t[key]) {\n      newT[key] = t[key];\n    }\n  }\n  return newT;\n}\nvar SAME_SITE = [\"strict\", \"lax\", \"none\"];\nfunction parseSameSite(string) {\n  string = string.toLowerCase();\n  return SAME_SITE.includes(string) ? string : void 0;\n}\nvar PRIORITY = [\"low\", \"medium\", \"high\"];\nfunction parsePriority(string) {\n  string = string.toLowerCase();\n  return PRIORITY.includes(string) ? string : void 0;\n}\nfunction splitCookiesString(cookiesString) {\n  if (!cookiesString)\n    return [];\n  var cookiesStrings = [];\n  var pos = 0;\n  var start;\n  var ch;\n  var lastComma;\n  var nextStart;\n  var cookiesSeparatorFound;\n  function skipWhitespace() {\n    while (pos < cookiesString.length && /\\s/.test(cookiesString.charAt(pos))) {\n      pos += 1;\n    }\n    return pos < cookiesString.length;\n  }\n  function notSpecialChar() {\n    ch = cookiesString.charAt(pos);\n    return ch !== \"=\" && ch !== \";\" && ch !== \",\";\n  }\n  while (pos < cookiesString.length) {\n    start = pos;\n    cookiesSeparatorFound = false;\n    while (skipWhitespace()) {\n      ch = cookiesString.charAt(pos);\n      if (ch === \",\") {\n        lastComma = pos;\n        pos += 1;\n        skipWhitespace();\n        nextStart = pos;\n        while (pos < cookiesString.length && notSpecialChar()) {\n          pos += 1;\n        }\n        if (pos < cookiesString.length && cookiesString.charAt(pos) === \"=\") {\n          cookiesSeparatorFound = true;\n          pos = nextStart;\n          cookiesStrings.push(cookiesString.substring(start, lastComma));\n          start = pos;\n        } else {\n          pos = lastComma + 1;\n        }\n      } else {\n        pos += 1;\n      }\n    }\n    if (!cookiesSeparatorFound || pos >= cookiesString.length) {\n      cookiesStrings.push(cookiesString.substring(start, cookiesString.length));\n    }\n  }\n  return cookiesStrings;\n}\n\n// src/request-cookies.ts\nvar RequestCookies = class {\n  constructor(requestHeaders) {\n    /** @internal */\n    this._parsed = /* @__PURE__ */ new Map();\n    this._headers = requestHeaders;\n    const header = requestHeaders.get(\"cookie\");\n    if (header) {\n      const parsed = parseCookie(header);\n      for (const [name, value] of parsed) {\n        this._parsed.set(name, { name, value });\n      }\n    }\n  }\n  [Symbol.iterator]() {\n    return this._parsed[Symbol.iterator]();\n  }\n  /**\n   * The amount of cookies received from the client\n   */\n  get size() {\n    return this._parsed.size;\n  }\n  get(...args) {\n    const name = typeof args[0] === \"string\" ? args[0] : args[0].name;\n    return this._parsed.get(name);\n  }\n  getAll(...args) {\n    var _a;\n    const all = Array.from(this._parsed);\n    if (!args.length) {\n      return all.map(([_, value]) => value);\n    }\n    const name = typeof args[0] === \"string\" ? args[0] : (_a = args[0]) == null ? void 0 : _a.name;\n    return all.filter(([n]) => n === name).map(([_, value]) => value);\n  }\n  has(name) {\n    return this._parsed.has(name);\n  }\n  set(...args) {\n    const [name, value] = args.length === 1 ? [args[0].name, args[0].value] : args;\n    const map = this._parsed;\n    map.set(name, { name, value });\n    this._headers.set(\n      \"cookie\",\n      Array.from(map).map(([_, value2]) => stringifyCookie(value2)).join(\"; \")\n    );\n    return this;\n  }\n  /**\n   * Delete the cookies matching the passed name or names in the request.\n   */\n  delete(names) {\n    const map = this._parsed;\n    const result = !Array.isArray(names) ? map.delete(names) : names.map((name) => map.delete(name));\n    this._headers.set(\n      \"cookie\",\n      Array.from(map).map(([_, value]) => stringifyCookie(value)).join(\"; \")\n    );\n    return result;\n  }\n  /**\n   * Delete all the cookies in the cookies in the request.\n   */\n  clear() {\n    this.delete(Array.from(this._parsed.keys()));\n    return this;\n  }\n  /**\n   * Format the cookies in the request as a string for logging\n   */\n  [Symbol.for(\"edge-runtime.inspect.custom\")]() {\n    return `RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`;\n  }\n  toString() {\n    return [...this._parsed.values()].map((v) => `${v.name}=${encodeURIComponent(v.value)}`).join(\"; \");\n  }\n};\n\n// src/response-cookies.ts\nvar ResponseCookies = class {\n  constructor(responseHeaders) {\n    /** @internal */\n    this._parsed = /* @__PURE__ */ new Map();\n    var _a, _b, _c;\n    this._headers = responseHeaders;\n    const setCookie = (_c = (_b = (_a = responseHeaders.getSetCookie) == null ? void 0 : _a.call(responseHeaders)) != null ? _b : responseHeaders.get(\"set-cookie\")) != null ? _c : [];\n    const cookieStrings = Array.isArray(setCookie) ? setCookie : splitCookiesString(setCookie);\n    for (const cookieString of cookieStrings) {\n      const parsed = parseSetCookie(cookieString);\n      if (parsed)\n        this._parsed.set(parsed.name, parsed);\n    }\n  }\n  /**\n   * {@link https://wicg.github.io/cookie-store/#CookieStore-get CookieStore#get} without the Promise.\n   */\n  get(...args) {\n    const key = typeof args[0] === \"string\" ? args[0] : args[0].name;\n    return this._parsed.get(key);\n  }\n  /**\n   * {@link https://wicg.github.io/cookie-store/#CookieStore-getAll CookieStore#getAll} without the Promise.\n   */\n  getAll(...args) {\n    var _a;\n    const all = Array.from(this._parsed.values());\n    if (!args.length) {\n      return all;\n    }\n    const key = typeof args[0] === \"string\" ? args[0] : (_a = args[0]) == null ? void 0 : _a.name;\n    return all.filter((c) => c.name === key);\n  }\n  has(name) {\n    return this._parsed.has(name);\n  }\n  /**\n   * {@link https://wicg.github.io/cookie-store/#CookieStore-set CookieStore#set} without the Promise.\n   */\n  set(...args) {\n    const [name, value, cookie] = args.length === 1 ? [args[0].name, args[0].value, args[0]] : args;\n    const map = this._parsed;\n    map.set(name, normalizeCookie({ name, value, ...cookie }));\n    replace(map, this._headers);\n    return this;\n  }\n  /**\n   * {@link https://wicg.github.io/cookie-store/#CookieStore-delete CookieStore#delete} without the Promise.\n   */\n  delete(...args) {\n    const [name, path, domain] = typeof args[0] === \"string\" ? [args[0]] : [args[0].name, args[0].path, args[0].domain];\n    return this.set({ name, path, domain, value: \"\", expires: /* @__PURE__ */ new Date(0) });\n  }\n  [Symbol.for(\"edge-runtime.inspect.custom\")]() {\n    return `ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`;\n  }\n  toString() {\n    return [...this._parsed.values()].map(stringifyCookie).join(\"; \");\n  }\n};\nfunction replace(bag, headers) {\n  headers.delete(\"set-cookie\");\n  for (const [, value] of bag) {\n    const serialized = stringifyCookie(value);\n    headers.append(\"set-cookie\", serialized);\n  }\n}\nfunction normalizeCookie(cookie = { name: \"\", value: \"\" }) {\n  if (typeof cookie.expires === \"number\") {\n    cookie.expires = new Date(cookie.expires);\n  }\n  if (cookie.maxAge) {\n    cookie.expires = new Date(Date.now() + cookie.maxAge * 1e3);\n  }\n  if (cookie.path === null || cookie.path === void 0) {\n    cookie.path = \"/\";\n  }\n  return cookie;\n}\n// Annotate the CommonJS export names for ESM import in node:\n0 && (module.exports = {\n  RequestCookies,\n  ResponseCookies,\n  parseCookie,\n  parseSetCookie,\n  stringifyCookie\n});\n","\"use strict\";\nif (process.env.NEXT_RUNTIME === \"edge\") {\n    module.exports = require(\"next/dist/server/future/route-modules/app-route/module.js\");\n} else {\n    if (process.env.NODE_ENV === \"development\") {\n        module.exports = require(\"next/dist/compiled/next-server/app-route.runtime.dev.js\");\n    } else if (process.env.TURBOPACK) {\n        module.exports = require(\"next/dist/compiled/next-server/app-route-turbo.runtime.prod.js\");\n    } else {\n        module.exports = require(\"next/dist/compiled/next-server/app-route.runtime.prod.js\");\n    }\n}\n\n//# sourceMappingURL=module.compiled.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n0 && (module.exports = {\n    RequestCookies: null,\n    ResponseCookies: null\n});\nfunction _export(target, all) {\n    for(var name in all)Object.defineProperty(target, name, {\n        enumerable: true,\n        get: all[name]\n    });\n}\n_export(exports, {\n    RequestCookies: function() {\n        return _cookies.RequestCookies;\n    },\n    ResponseCookies: function() {\n        return _cookies.ResponseCookies;\n    }\n});\nconst _cookies = require(\"next/dist/compiled/@edge-runtime/cookies\");\n\n//# sourceMappingURL=cookies.js.map","import { Pool } from 'pg';\n\nconst pool = new Pool({\n  user: process.env.POSTGRES_USER,\n  password: process.env.POSTGRES_PASSWORD,\n  host: process.env.POSTGRES_HOST,\n  port: parseInt(process.env.POSTGRES_PORT || '5432'),\n  database: process.env.POSTGRES_DB,\n  ssl: process.env.NODE_ENV === 'production' ? { rejectUnauthorized: false } : false,\n});\n\nexport default pool;\n","import { Profile } from './types';\nimport pool from '../config';\nimport { QueryResult } from 'pg';\n\nexport class ProfileModel {\n  static async create(userId: number, data: Partial<Profile>): Promise<Profile> {\n    const fields = ['user_id', ...Object.keys(data)];\n    const values = [userId, ...Object.values(data)];\n    const placeholders = fields.map((_, i) => `$${i + 1}`).join(', ');\n    \n    const query = `\n      INSERT INTO profiles (${fields.join(', ')})\n      VALUES (${placeholders})\n      RETURNING *\n    `;\n    \n    const result: QueryResult<Profile> = await pool.query(query, values);\n    return result.rows[0];\n  }\n\n  static async findByUserId(userId: number): Promise<Profile | null> {\n    const query = 'SELECT * FROM profiles WHERE user_id = $1';\n    const result: QueryResult<Profile> = await pool.query(query, [userId]);\n    return result.rows[0] || null;\n  }\n\n  static async update(userId: number, updates: Partial<Profile>): Promise<Profile | null> {\n    const allowedUpdates = [\n      'display_name',\n      'bio',\n      'avatar_url',\n      'theme_preferences',\n      'custom_css',\n      'custom_html',\n      'social_links'\n    ];\n    \n    const updateFields = Object.keys(updates).filter(key => allowedUpdates.includes(key));\n    if (updateFields.length === 0) return null;\n\n    const setClause = updateFields.map((field, index) => `${field} = $${index + 2}`).join(', ');\n    const values = updateFields.map(field => {\n      const value = updates[field as keyof Profile];\n      return ['theme_preferences', 'social_links'].includes(field) ? JSON.stringify(value) : value;\n    });\n\n    const query = `\n      UPDATE profiles \n      SET ${setClause}, updated_at = CURRENT_TIMESTAMP \n      WHERE user_id = $1 \n      RETURNING *\n    `;\n\n    const result: QueryResult<Profile> = await pool.query(query, [userId, ...values]);\n    return result.rows[0] || null;\n  }\n\n  static async delete(userId: number): Promise<boolean> {\n    const query = 'DELETE FROM profiles WHERE user_id = $1 RETURNING id';\n    const result = await pool.query(query, [userId]);\n    return result.rowCount > 0;\n  }\n\n  static async getTheme(userId: number): Promise<Record<string, any> | null> {\n    const query = 'SELECT theme_preferences FROM profiles WHERE user_id = $1';\n    const result = await pool.query(query, [userId]);\n    return result.rows[0]?.theme_preferences || null;\n  }\n\n  static async updateTheme(userId: number, theme: Record<string, any>): Promise<boolean> {\n    const query = `\n      UPDATE profiles \n      SET theme_preferences = $2, updated_at = CURRENT_TIMESTAMP \n      WHERE user_id = $1\n    `;\n    const result = await pool.query(query, [userId, JSON.stringify(theme)]);\n    return result.rowCount > 0;\n  }\n}\n","import { User } from './types';\nimport pool from '../config';\nimport { QueryResult } from 'pg';\n\nexport class UserModel {\n  static async create(username: string, email?: string, authDomain?: string): Promise<User> {\n    const query = `\n      INSERT INTO users (username, email, auth_domain)\n      VALUES ($1, $2, $3)\n      RETURNING *\n    `;\n    \n    const result: QueryResult<User> = await pool.query(query, [username, email, authDomain]);\n    return result.rows[0];\n  }\n\n  static async findById(id: number): Promise<User | null> {\n    const query = 'SELECT * FROM users WHERE id = $1';\n    const result: QueryResult<User> = await pool.query(query, [id]);\n    return result.rows[0] || null;\n  }\n\n  static async findByUsername(username: string): Promise<User | null> {\n    const query = 'SELECT * FROM users WHERE username = $1';\n    const result: QueryResult<User> = await pool.query(query, [username]);\n    return result.rows[0] || null;\n  }\n\n  static async update(id: number, updates: Partial<User>): Promise<User | null> {\n    const allowedUpdates = ['username', 'email', 'auth_domain'];\n    const updateFields = Object.keys(updates).filter(key => allowedUpdates.includes(key));\n    \n    if (updateFields.length === 0) return null;\n\n    const setClause = updateFields.map((field, index) => `${field} = $${index + 2}`).join(', ');\n    const values = updateFields.map(field => updates[field as keyof User]);\n\n    const query = `\n      UPDATE users \n      SET ${setClause}, updated_at = CURRENT_TIMESTAMP \n      WHERE id = $1 \n      RETURNING *\n    `;\n\n    const result: QueryResult<User> = await pool.query(query, [id, ...values]);\n    return result.rows[0] || null;\n  }\n\n  static async delete(id: number): Promise<boolean> {\n    const query = 'DELETE FROM users WHERE id = $1 RETURNING id';\n    const result = await pool.query(query, [id]);\n    return (result.rowCount ?? 0) > 0;\n  }\n\n  static async list(limit: number = 10, offset: number = 0): Promise<User[]> {\n    const query = 'SELECT * FROM users ORDER BY created_at DESC LIMIT $1 OFFSET $2';\n    const result: QueryResult<User> = await pool.query(query, [limit, offset]);\n    return result.rows;\n  }\n}\n"],"names":["module","exports","require","wrapHandler","handler","method","process","env","NEXT_PHASE","Proxy","apply","originalFunction","thisArg","args","sentryTraceHeader","baggageHeader","headers","requestAsyncStore","request_async_storage_external_js_","requestAsyncStorage","getStore","_nullishCoalesce","h","_optionalChain","x","_","_2","get","_3","undefined","_4","_5","_6","_7","e","nextjs_","wrapRouteHandlerWithSentry","parameterizedRoute","GET","req","params","username","user","UserModel","findByUsername","NextResponse","json","error","status","profile","ProfileModel","findByUserId","id","auth_domain","email","safeUser","console","POST","serverComponentModule.POST","PUT","serverComponentModule.PUT","PATCH","serverComponentModule.PATCH","DELETE","serverComponentModule.DELETE","HEAD","serverComponentModule.HEAD","OPTIONS","serverComponentModule.OPTIONS","routeModule","module_compiled","AppRouteRouteModule","definition","kind","route_kind","APP_ROUTE","page","pathname","filename","bundlePath","resolvedPagePath","nextConfigOutput","userland","route_namespaceObject","staticGenerationAsyncStorage","serverHooks","headerHooks","staticGenerationBailout","originalPathname","patchFetch","patch_fetch","_sentryCollisionFreeGlobalObject","global","self","Sentry","dsn","SENTRY_DSN","tracesSampleRate","integrations","tracePropagationTargets","environment","beforeSend","event","exception","exceptionValue","values","value","includes","debug","maxBreadcrumbs","attachStacktrace","__defProp","Object","defineProperty","__getOwnPropDesc","getOwnPropertyDescriptor","__getOwnPropNames","getOwnPropertyNames","__hasOwnProp","prototype","hasOwnProperty","src_exports","stringifyCookie","c","_a","attrs","path","expires","Date","toUTCString","maxAge","domain","secure","httpOnly","sameSite","priority","filter","Boolean","name","encodeURIComponent","join","parseCookie","cookie","map","Map","pair","split","splitAt","indexOf","set","key","slice","decodeURIComponent","parseSetCookie","setCookie","string","attributes","httponly","maxage","samesite","fromEntries","value2","toLowerCase","compact","t","newT","Number","SAME_SITE","PRIORITY","__export","target","all","enumerable","RequestCookies","ResponseCookies","__copyProps","to","from","except","desc","call","constructor","requestHeaders","_parsed","_headers","header","Symbol","iterator","size","getAll","Array","length","n","has","delete","names","result","isArray","clear","keys","for","JSON","stringify","toString","v","responseHeaders","_b","_c","getSetCookie","cookieString","splitCookiesString","cookiesString","start","ch","lastComma","nextStart","cookiesSeparatorFound","cookiesStrings","pos","skipWhitespace","test","charAt","push","substring","parsed","normalizeCookie","now","replace","bag","serialized","append","_export","_cookies","__WEBPACK_DEFAULT_EXPORT__","Pool","POSTGRES_USER","password","POSTGRES_PASSWORD","host","POSTGRES_HOST","port","parseInt","POSTGRES_PORT","database","POSTGRES_DB","ssl","rejectUnauthorized","create","userId","data","fields","placeholders","i","query","pool","rows","update","updates","allowedUpdates","updateFields","setClause","field","index","rowCount","getTheme","theme_preferences","updateTheme","theme","authDomain","findById","list","limit","offset"],"sourceRoot":""}