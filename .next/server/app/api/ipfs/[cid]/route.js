"use strict";(()=>{var e={};e.id=508,e.ids=[508],e.modules={58097:e=>{e.exports=require("@sentry/nextjs")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},35900:e=>{e.exports=require("pg")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},63477:e=>{e.exports=require("querystring")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},15206:e=>{e.exports=require("zlib")},36837:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>A,originalPathname:()=>C,patchFetch:()=>b,requestAsyncStorage:()=>Z,routeModule:()=>F,serverHooks:()=>T,staticGenerationAsyncStorage:()=>w,staticGenerationBailout:()=>m});var o={};r.r(o),r.d(o,{DELETE:()=>v,GET:()=>j,HEAD:()=>S,OPTIONS:()=>E,PATCH:()=>q,POST:()=>P,PUT:()=>g});var s=r(13223),n=r(6566),i=r(77419);r(80001);var a=r(16915),u=r(61907),c=r(58097),d=r(54580),p=r(14098),l=r(8593),f=r(6417);async function x(e,{params:t}){try{let r=await (0,l.ts)();if(!r)return p.Z.json({error:"Unauthorized"},{status:401});let{cid:o}=t,{pinned:s}=await e.json();if(void 0===s)return p.Z.json({error:"No valid update fields provided"},{status:400});let n=await f.Q.findByCid(o);if(!n)return p.Z.json({error:"Content not found"},{status:404});if(!await (0,l.Fs)(r.id,n.user_id))return p.Z.json({error:"Forbidden"},{status:403});let i=await f.Q.setPinStatus(o,s);return p.Z.json({content:i})}catch(e){return console.error("Error updating IPFS content:",e),p.Z.json({error:"Failed to update IPFS content"},{status:500})}}async function h(e,{params:t}){try{let e=await (0,l.ts)();if(!e)return p.Z.json({error:"Unauthorized"},{status:401});let{cid:r}=t,o=await f.Q.findByCid(r);if(!o)return p.Z.json({error:"Content not found"},{status:404});if(!await (0,l.Fs)(e.id,o.user_id))return p.Z.json({error:"Forbidden"},{status:403});if(!await f.Q.delete(r,e.id))return p.Z.json({error:"Failed to delete content"},{status:500});return p.Z.json({success:!0})}catch(e){return console.error("Error deleting IPFS content:",e),p.Z.json({error:"Failed to delete IPFS content"},{status:500})}}function y(e,t){return"phase-production-build"===process.env.NEXT_PHASE||"function"!=typeof e?e:new Proxy(e,{apply:(e,r,o)=>{let s,n,i;try{let e=d.requestAsyncStorage.getStore();s=(0,a.h)((0,u.x)([e,"optionalAccess",e=>e.headers,"access",e=>e.get,"call",e=>e("sentry-trace")]),()=>void 0),n=(0,a.h)((0,u.x)([e,"optionalAccess",e=>e.headers,"access",e=>e.get,"call",e=>e("baggage")]),()=>void 0),i=(0,u.x)([e,"optionalAccess",e=>e.headers])}catch(e){}return c.wrapRouteHandlerWithSentry(e,{method:t,parameterizedRoute:"/api/ipfs/[cid]",sentryTraceHeader:s,baggageHeader:n,headers:i}).apply(r,o)}})}let j=y(async function(e,{params:t}){try{let{cid:e}=t,r=await f.Q.findByCid(e);if(!r)return p.Z.json({error:"Content not found"},{status:404});return p.Z.json({content:r})}catch(e){return console.error("Error fetching IPFS content:",e),p.Z.json({error:"Failed to fetch IPFS content"},{status:500})}},"GET"),P=y(void 0,"POST"),g=y(void 0,"PUT"),q=y(x,"PATCH"),v=y(h,"DELETE"),S=y(void 0,"HEAD"),E=y(void 0,"OPTIONS"),F=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/ipfs/[cid]/route",pathname:"/api/ipfs/[cid]",filename:"route",bundlePath:"app/api/ipfs/[cid]/route"},resolvedPagePath:"C:\\Users\\adoni\\Desktop\\projects\\basednet\\src\\app\\api\\ipfs\\[cid]\\route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:Z,staticGenerationAsyncStorage:w,serverHooks:T,headerHooks:A,staticGenerationBailout:m}=F,C="/api/ipfs/[cid]/route";function b(){return(0,i.patchFetch)({serverHooks:T,staticGenerationAsyncStorage:w})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[565,834,98,120],()=>r(36837));module.exports=o})();
//# sourceMappingURL=route.js.map