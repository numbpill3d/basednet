"use strict";(()=>{var e={};e.id=682,e.ids=[682],e.modules={58097:e=>{e.exports=require("@sentry/nextjs")},72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},35900:e=>{e.exports=require("pg")},39491:e=>{e.exports=require("assert")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},82361:e=>{e.exports=require("events")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},63477:e=>{e.exports=require("querystring")},57310:e=>{e.exports=require("url")},73837:e=>{e.exports=require("util")},15206:e=>{e.exports=require("zlib")},63545:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>w,originalPathname:()=>F,patchFetch:()=>H,requestAsyncStorage:()=>S,routeModule:()=>E,serverHooks:()=>A,staticGenerationAsyncStorage:()=>T,staticGenerationBailout:()=>I});var s={};r.r(s),r.d(s,{DELETE:()=>v,GET:()=>g,HEAD:()=>j,OPTIONS:()=>m,PATCH:()=>y,POST:()=>q,PUT:()=>P});var o=r(13223),a=r(6566),n=r(77419);r(80001);var i=r(16915),u=r(61907),p=r(58097),c=r(54580),d=r(14098),l=r(8593),x=r(6417);async function h(e){try{let t=await (0,l.ts)();if(!t)return d.Z.json({error:"Unauthorized"},{status:401});let{cid:r,contentType:s,filename:o,size:a}=await e.json();if(!r)return d.Z.json({error:"CID is required"},{status:400});let n=await x.Q.create(t.id,r,s,o,a);return d.Z.json({content:n},{status:201})}catch(e){return console.error("Error creating IPFS content:",e),d.Z.json({error:"Failed to create IPFS content"},{status:500})}}function f(e,t){return"phase-production-build"===process.env.NEXT_PHASE||"function"!=typeof e?e:new Proxy(e,{apply:(e,r,s)=>{let o,a,n;try{let e=c.requestAsyncStorage.getStore();o=(0,i.h)((0,u.x)([e,"optionalAccess",e=>e.headers,"access",e=>e.get,"call",e=>e("sentry-trace")]),()=>void 0),a=(0,i.h)((0,u.x)([e,"optionalAccess",e=>e.headers,"access",e=>e.get,"call",e=>e("baggage")]),()=>void 0),n=(0,u.x)([e,"optionalAccess",e=>e.headers])}catch(e){}return p.wrapRouteHandlerWithSentry(e,{method:t,parameterizedRoute:"/api/ipfs",sentryTraceHeader:o,baggageHeader:a,headers:n}).apply(r,s)}})}let g=f(async function(e){try{let t=await (0,l.ts)();if(!t)return d.Z.json({error:"Unauthorized"},{status:401});let r=new URL(e.url),s=parseInt(r.searchParams.get("limit")||"10"),o=parseInt(r.searchParams.get("offset")||"0"),a=await x.Q.findByUser(t.id,s,o),n=await x.Q.getContentStats(t.id);return d.Z.json({content:a,stats:n})}catch(e){return console.error("Error fetching IPFS content:",e),d.Z.json({error:"Failed to fetch IPFS content"},{status:500})}},"GET"),q=f(h,"POST"),P=f(void 0,"PUT"),y=f(void 0,"PATCH"),v=f(void 0,"DELETE"),j=f(void 0,"HEAD"),m=f(void 0,"OPTIONS"),E=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/ipfs/route",pathname:"/api/ipfs",filename:"route",bundlePath:"app/api/ipfs/route"},resolvedPagePath:"C:\\Users\\adoni\\Desktop\\projects\\basednet\\src\\app\\api\\ipfs\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:S,staticGenerationAsyncStorage:T,serverHooks:A,headerHooks:w,staticGenerationBailout:I}=E,F="/api/ipfs/route";function H(){return(0,n.patchFetch)({serverHooks:A,staticGenerationAsyncStorage:T})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[565,834,98,120],()=>r(63545));module.exports=s})();
//# sourceMappingURL=route.js.map