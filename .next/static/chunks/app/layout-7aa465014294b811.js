(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2626:function(e,t,r){Promise.resolve().then(r.t.bind(r,2447,23)),Promise.resolve().then(r.t.bind(r,440,23)),Promise.resolve().then(r.t.bind(r,3385,23)),Promise.resolve().then(r.t.bind(r,9267,23)),Promise.resolve().then(r.bind(r,4122))},4122:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return a}});var n=r(3827);r(4090);var o=r(1126),i=r(3779);function a(e){let{children:t}=e;return(0,n.jsx)(o.SessionProvider,{children:(0,n.jsx)(i.H,{children:t})})}},3779:function(e,t,r){"use strict";r.d(t,{H:function(){return l},a:function(){return c}});var n=r(3827),o=r(4090),i=r(1126),a=r(8222);let s=(0,o.createContext)(void 0);function l(e){let{children:t}=e,{data:r,status:l}=(0,i.useSession)(),[c,u]=(0,o.useState)(null),[f,d]=(0,o.useState)(null),[h,y]=(0,o.useState)(!0),[p,_]=(0,o.useState)(null),m=async()=>{if(!(null==r?void 0:r.user)){u(null),d(null),y(!1);return}try{var e,t;y(!0),_(null);let r=await a.hi.user.getCurrentUser();if(r.error)throw Error(r.error);u((null===(e=r.data)||void 0===e?void 0:e.user)||null);let n=await a.hi.profile.getProfile();if(n.error)throw Error(n.error);d((null===(t=n.data)||void 0===t?void 0:t.profile)||null)}catch(e){console.error("Error fetching user data:",e),_(e.message)}finally{y(!1)}};(0,o.useEffect)(()=>{"loading"!==l&&m()},[r,l]);let v=async()=>{try{await (0,i.signIn)("indieauth",{callbackUrl:"/"})}catch(e){console.error("Login error:",e),_(e.message)}},b=async()=>{try{await (0,i.signOut)({callbackUrl:"/"}),u(null),d(null)}catch(e){console.error("Logout error:",e),_(e.message)}},g=async()=>{await m()};return(0,n.jsx)(s.Provider,{value:{user:c,profile:f,isLoading:h,isAuthenticated:!!c,error:p,login:v,logout:b,refreshUserData:g},children:t})}function c(){let e=(0,o.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},8222:function(e,t,r){"use strict";r.d(t,{hi:function(){return i}});class n extends Error{constructor(e,t){super(e),this.status=t,this.name="ApiError"}}async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let r=await fetch(e,{...t,headers:{"Content-Type":"application/json",...t.headers}}),o=await r.json();if(!r.ok)throw new n(o.error||"An error occurred",r.status);return{data:o}}catch(e){return{error:e.message}}}let i={user:{getCurrentUser:async()=>o("/api/users?me=true"),getUserByUsername:async e=>o("/api/users/".concat(e)),updateUser:async e=>o("/api/users",{method:"PUT",body:JSON.stringify(e)}),listUsers:async function(){let{limit:e=10,offset:t=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o("/api/users?limit=".concat(e,"&offset=").concat(t))}},profile:{getProfile:async()=>o("/api/profile"),updateProfile:async e=>o("/api/profile",{method:"PUT",body:JSON.stringify(e)})},ipfs:{getContent:async function(){let{limit:e=10,offset:t=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o("/api/ipfs?limit=".concat(e,"&offset=").concat(t))},getContentByCid:async e=>o("/api/ipfs/".concat(e)),createContent:async e=>o("/api/ipfs",{method:"POST",body:JSON.stringify(e)}),updatePinStatus:async(e,t)=>o("/api/ipfs/".concat(e),{method:"PATCH",body:JSON.stringify({pinned:t})}),deleteContent:async e=>o("/api/ipfs/".concat(e),{method:"DELETE"})}}},3385:function(){},9267:function(){},2447:function(e){e.exports={style:{fontFamily:"'__Inter_d65c78', '__Inter_Fallback_d65c78'",fontStyle:"normal"},className:"__className_d65c78",variable:"__variable_d65c78"}},440:function(e){e.exports={style:{fontFamily:"'__Roboto_Mono_43fb55', '__Roboto_Mono_Fallback_43fb55'",fontStyle:"normal"},className:"__className_43fb55",variable:"__variable_43fb55"}}},function(e){e.O(0,[126,971,69,744],function(){return e(e.s=2626)}),_N_E=e.O()}]);